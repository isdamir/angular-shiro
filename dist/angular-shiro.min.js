/**
 * angular-shiro
 * @version v0.1.3 - 2018-09-04
 * @link https://github.com/gnavarro77/angular-shiro
 * @author Gilles Navarro ()
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b,c){"use strict";function d(){var a={urls:{"/":"anon","/index":"anon","/login":"anon","/signin":"anon","/logout":"logout","/signout":"logout"},login:{api:"/api/authenticate",path:"/login"},logout:{api:"/api/logout",path:"/"},tokenSid:"angularShiroSid"};this.setFilter=function(b,c){var d={};d[b]=c,angular.extend(a.urls,d)},this.setLogoutPath=function(b){a.logout.path=b},this.setLoginPath=function(b){a.login.path=b},this.setAuthenticateUrl=function(b){a.login.api=b},this.setTokenSid=function(b){a.tokenSid=b},this.$get=[function(){return a}]}function e(){this.$get=["$q","$http","$timeout","angularShiroConfig",function(a,b,c,d){return{authenticate:function(c){if(!c||!c.getPrincipal()||!c.getCredentials())throw"[Autheticate] Can not authenticate. Invalid token provided!";if(!(d&&d.login&&d.login.api))throw"[Autheticate] Can not authenticate since no 'config.login.api' is provided. Please check your configuration.";var e=a.defer(),f=d;return b.post(d.login.api,{token:{principal:c.getPrincipal(),credentials:c.getCredentials()}}).success(function(a,b,c){e.resolve([a,b,c,f])}).error(function(a,b,c){e.reject([a,b,c,f])}),e.promise}}}]}function f(a,b,c){this.username=a||null,this.password=b||null,this.rememberMe=c||!1,this.getPrincipal=function(){return this.username},this.getCredentials=function(){return this.password},this.isRememberMe=function(){return this.rememberMe},this.setRememberMe=function(a){this.rememberMe=a},this.clear=function(){this.username=this.password=null,this.rememberMe=!1},this.serialize=function(){return angular.toJson(this)},this.deserialize=function(a){var b=angular.fromJson(a);angular.extend(this,b)}}function g(a,b){this.principal=a,this.credentials=b,this.getPrincipal=function(){return this.principal},this.getCredentials=function(){return this.credentials}}function h(){this.parse=function(a){return this.checkValidity(a),{authc:this.parseAuthc(a.info.authc),authz:this.parseAuthz(a.info.authz)}},this.parseAuthc=function(a){return new g(a.principal,a.credentials)},this.parseAuthz=function(a){return new j(a.roles,a.permissions)},this.checkValidity=function(a){if(!(angular.isDefined(a)&&angular.isDefined(a.info)&&this.isAuthcValid(a.info)&&this.isAuthzValid(a.info))){throw{name:"ParseException",message:"Response does not match expected structure."}}},this.isAuthcValid=function(a){var b=angular.isDefined(a.authc);if(b){var c=a.authc;b=angular.isDefined(c.principal)&&angular.isDefined(c.credentials)}return b},this.isAuthzValid=function(a){var b=angular.isDefined(a.authz);if(b){var c=a.authz;b=angular.isDefined(c.roles)&&angular.isDefined(c.permissions)}return b}}function i(a,b){this.WILDCARD_TOKEN="*",this.PART_DIVIDER_TOKEN=":",this.SUBPART_DIVIDER_TOKEN=",",this.caseSensitive=b||!1,this.parts,this.implies=function(a){var b=angular.isDefined(a)&&this.getParts().length>0;if(b){a=angular.isString(a)?new i(a):a;for(var c=a.getParts(),d=c.length,e=this.getParts(),f=0,g=e.length;f<g;f++){var h=e[f];if(f<d){var j=c[f];if(!this.containsWildCardToken(h)&&!this.containsAll(h,j)){b=!1;break}}else if(!this.containsWildCardToken(h)){b=!1;break}}}return b},this.containsAll=function(a,b){for(var c=!0,d=0;d<b.length;d++)if(-1===a.indexOf(b[d])){c=!1;break}return c},this.containsWildCardToken=function(a){return a.indexOf(this.WILDCARD_TOKEN)>-1},this.resolveParts=function(a,b){var c=[];if(angular.isDefined(a)&&angular.isString(a)){a=a.trim?a.trim():a;var d=a.split(this.PART_DIVIDER_TOKEN);angular.forEach(d,function(a){c.push(this.resolveSubParts(a,b))},this)}return c},this.resolveSubParts=function(a,b){var c=[],d=a.split(this.SUBPART_DIVIDER_TOKEN),e=0;return angular.forEach(d,function(a){a=a.trim?a.trim():a,a=!1===b?angular.lowercase(a):a,c[e++]=a}),c},this.getParts=function(){return this.parts},this.parts=this.resolveParts(a,b)}function j(a,b){this.roles=angular.isArray(a)?a:[],this.permissions=angular.isArray(b)?b:[],this.getRoles=function(){return this.roles},this.getPermissions=function(){return this.permissions},this.getStringPermissions=function(){for(var a=[],b=0,c=this.permissions.length;b<c;b++){var d=this.permissions[b];angular.isString(d)&&a.push(d)}return a},this.getObjectPermissions=function(){for(var a=[],b=0,c=this.permissions.length;b<c;b++){var d=this.permissions[b];d instanceof i&&a.push(d)}return a}}function k(){this.permissions,this.authorizationInfo,this.setAuthorizationInfo=function(a){if(!(a&&null!==a&&a instanceof j))throw{illegalArgumentException:"invalid value for authorizationInfo"};this.authorizationInfo=a,this.permissions=this.getPermissions(a)},this.clear=function(){this.authorizationInfo=this.permissions=null},this.isPermitted=function(a){var b;return angular.isArray(a)?(b=[],angular.forEach(a,function(a){b.push(this.isObjectPermissionPermitted(this.resolvePermission(a)))},this)):b=this.isObjectPermissionPermitted(this.resolvePermission(a)),b},this.isPermittedAll=function(a){return-1===this.isPermitted(a).indexOf(!1)},this.hasRole=function(a){var b=!1;return a&&(b=this.authorizationInfo.getRoles().indexOf(a)>-1),b},this.hasRoles=function(a){var b=[];return a&&angular.isArray(a)&&angular.forEach(a,function(a){b.push(this.hasRole(a))},this),b},this.hasAllRoles=function(a){return-1===this.hasRoles(a).indexOf(!1)},this.getPermissions=function(a){for(var b=a.getObjectPermissions(),c=a.getStringPermissions(),d=0,e=c.length;d<e;d++)b.push(new i(c[d]));return b},this.isObjectPermissionPermitted=function(a){for(var b=!1,c=0,d=this.permissions.length;c<d&&!b;c++)b=this.permissions[c].implies(a);return b},this.resolvePermission=function(a){return angular.isString(a)?new i(a):a}}function l(a){this.msg=a}function m(){this.uid,this.startTimestamp=new Date,this.stopTimestamp=null,this.lastAccessTime=new Date,this.timeout=18e5,this.expired=!1,this.attributes={},this.getId=function(){return this.uid},this.setId=function(a){this.uid=a},this.getStartTimestamp=function(){return this.startTimestamp},this.getLastAccessTime=function(){return this.lastAccessTime},this.getTimeout=function(){return this.timeout},this.setTimeout=function(a){this.timeout=a},this.touch=function(){this.lastAccessTime=new Date},this.stop=function(){null===this.stopTimestamp&&(this.stopTimestamp=new Date)},this.isStopped=function(){return null!==this.stopTimestamp},this.isExpired=function(){return this.expired},this.expire=function(){this.stop(),this.expired=!0},this.isValid=function(){return!this.isStopped()&&!this.isExpired()},this.validate=function(){if(this.isStopped()){throw new l("Session with id ["+this.getId()+"] has been explicitly stopped.  No further interaction under this session is allowed.")}if(this.isTimedOut())throw this.expire(),new l("Session has expired")},this.isTimedOut=function(){var a=this.isExpired();if(!a){var b=this.getTimeout();if(b>=1){var c=(new Date).getTime(),d=c-b,e=new Date(d);a=this.lastAccessTime<=e}}return a},this.getAttributeKeys=function(){var a=[];return angular.forEach(this.attributes,function(b,c){a.push(c)}),a},this.getAttribute=function(a){return this.attributes[a]},this.setAttribute=function(a,b){this.attributes[a]=b},this.removeAttribute=function(a){delete this.attributes[a]}}function n(a){this.sessionDAO=a,this.start=function(a){var b=new m;return this.sessionDAO.create(b,a),b},this.getSession=function(a){var b=this.sessionDAO.readSession(a);return b&&b.validate(),b},this.update=function(a){this.sessionDAO.update(a)},this.delete=function(a){null!==a&&this.sessionDAO.delete(a)}}function o(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function p(a){this.cookie=a,this.create=function(a,b){return b||(b=o()),a.setId(b),this.cookie.put(b,angular.toJson(a),{expires:"-1"}),b},this.readSession=function(a){var b=null,c=angular.fromJson(this.cookie.get(a));return c&&(b=new m,angular.extend(b,c)),b},this.update=function(a){this.cookie.put(a.getId(),angular.toJson(a),{expires:"-1"})},this.delete=function(a){this.cookie.remove(a.getId())}}function q(){this.DEFAULT_PATH_SEPARATOR="/",this.pathSeparator=this.DEFAULT_PATH_SEPARATOR,this.setPathSeparator=function(a){this.pathSeparator=null!==a?a:this.DEFAULT_PATH_SEPARATOR},this.match=function(a,b){return this.doMatch(a,b,!0)},this.doMatch=function(a,b,c){if(b.startsWith(this.pathSeparator)!==a.startsWith(this.pathSeparator))return!1;for(var d=a.split(this.pathSeparator),e=b.split(this.pathSeparator),f=0,g=d.length-1,h=0,i=e.length-1;f<=g&&h<=i;){var j=d[f];if("**"===j)break;if(!this.matchStrings(j,e[h]))return!1;f++,h++}if(h>i){if(f>g)return a.endsWith(this.pathSeparator)?b.endsWith(this.pathSeparator):!b.endsWith(this.pathSeparator);if(!c)return!0;if(f===g&&"*"===d[f]&&b.endsWith(this.pathSeparator))return!0;for(var k=f;k<=g;k++)if("**"!==d[k])return!1;return!0}if(f>g)return!1;if(!c&&"**"===d[f])return!0;for(;f<=g&&h<=i;){var l=d[g];if("**"===l)break;if(!this.matchStrings(l,e[i]))return!1;g--,i--}if(h>i){for(var m=f;m<=g;m++)if("**"!==d[m])return!1;return!0}for(;f!==g&&h<=i;){for(var n=-1,o=f+1;o<=g;o++)if("**"===d[o]){n=o;break}if(n!==f+1){for(var p=n-f-1,q=i-h+1,r=-1,s=0;s<=q-p;s++){for(var t=0;t<p;t++){var u=d[f+t+1],v=e[h+s+t];this.matchStrings(u,v)}r=h+s;break}if(-1===r)return!1;f=n,h=r+p}else f++}for(var w=f;w<=g;w++)if("**"!==d[w])return!1;return!0},this.matchStrings=function(a,b){var c,d=a.split(""),e=b.split(""),f=0,g=d.length-1,h=0,i=e.length-1;if(!this.containsStar(a)){if(g!==i)return!1;for(var j=0;j<=g;j++)if("?"!==(c=d[j])&&c!==e[j])return!1;return!0}if(0===g)return!0;for(;"*"!==(c=d[f])&&h<=i;){if("?"!==c&&c!==e[h])return!1;f++,h++}if(h>i){for(var k=f;k<=g;k++)if("*"!==d[k])return!1;return!0}for(;"*"!==(c=d[g])&&h<=i;){if("?"!==c&&c!==e[i])return!1;g--,i--}if(h>i){for(var l=f;l<=g;l++)if("*"!==d[l])return!1;return!0}for(;f!==g&&h<=i;){for(var m=-1,n=f+1;n<=g;n++)if("*"===d[n]){m=n;break}if(m!==f+1){var o=m-f-1,p=i-h+1,q=-1;a:for(var r=0;r<=p-o;r++){for(var s=0;s<o;s++)if("?"!==(c=d[f+s+1])&&c!==e[h+r+s])continue a;q=h+r;break}if(-1===q)return!1;f=m,h=q+o}else f++}for(var t=f;t<=g;t++)if("*"!==d[t])return!1;return!0},this.containsStar=function(a){var b=!1;if(a&&null!==a)for(var c=0;c<a.length;c++)if("*"===a.charAt(c)){b=!0;break}return b}}function r(a,b,c,d){this.authenticated=!1,this.sessionManager=new n(new p(d)),this.session=null,this.sidSession=null,this.authorizer=b,this.authenticationInfo,this.remembered=!1,this.login=function(b){var d=a.authenticate(b),e=this;return d.then(function(a){var d=c.parse(a[0]);e.authenticationInfo=d.authc,e.authorizer.setAuthorizationInfo(d.authz),e.authenticated=!0;var f=e.getSessionBySid(!0,a[3].tokenSid);if(f.setAttribute("token",a[0]),e.sessionManager.update(f),b.isRememberMe()){var g=e.getSession(!0);g.setAttribute("token",b),e.sessionManager.update(g),e.remembered=!0}b.clear()},function(a,b,c,d){e.clear()}),d},this.rememberMe=function(a){var b=!1,c=this.sessionManager.getSession(a);if(null!==c&&c.getAttribute("token")){var d=new f;d.deserialize(c.getAttribute("token")),b=this.login(d)}return b},this.restoreAuth=function(a){if(!this.isAuthenticated()){var b=this.sessionManager.getSession(a.tokenSid);if(null!==b){var d=b.getAttribute("token");if(null!==d){var e=c.parse(d);if(e)return this.sidSession=b,this.authenticationInfo=e.authc,this.authorizer.setAuthorizationInfo(e.authz),this.authenticated=!0,!0}}return!1}return!0},this.logout=function(){this.clear(),this.sessionManager.delete(this.session),this.sessionManager.delete(this.sidSession)},this.getSession=function(a){return null===this.session&&a&&(this.session=this.sessionManager.start()),this.session},this.getSessionBySid=function(a,b){return null===this.sidSession&&a&&(this.sidSession=this.sessionManager.start(b)),this.sidSession},this.getPrincipal=function(){var a="";return angular.isDefined(this.authenticationInfo)&&angular.isObject(this.authenticationInfo)&&(a=this.authenticationInfo.getPrincipal()),a},this.isAuthenticated=function(){return this.authenticated},this.isRemembered=function(){return this.remembered},this.hasRole=function(a){return this.isAuthenticated()&&angular.isDefined(this.authorizer)&&this.authorizer.hasRole(a)},this.hasRoles=function(a){var b=[];return angular.forEach(a,function(a){b.push(this.hasRole(a))},this),b},this.hasAllRoles=function(a){return this.isAuthenticated()&&this.authorizer.hasAllRoles(a)},this.isPermitted=function(a){return this.isAuthenticated()&&this.authorizer.isPermitted(a)},this.isPermittedAll=function(a){return this.isAuthenticated()&&this.authorizer.isPermittedAll(a)},this.clear=function(){this.authenticated=this.remembered=!1,this.authenticationInfo=null,this.authorizer.clear()}}function s(a){var b=a[0],c=a[a.length-1];if(b===c)return angular.element(b);var d=b,e=[d];do{if(!(d=d.nextSibling))break;e.push(d)}while(d!==c);return angular.element(e)}var t=["angularShiroConfig","$injector",function(a,b){var c=new q,d=a.urls;return{resolve:function(a){var b=this.resolveStringFilters(a);return this.resolveFilters(b)},resolveFilters:function(a){var b=[];if(a)for(var c=a.split(","),d=0;d<c.length;d++){var e=this.resolveFilter(c[d]);null!==e&&b.push(e)}return b},resolveFilter:function(a){var c=null,d=this.resolveFilterName(a),e=this.resolveFilterArgs(a);return c=b.get(d),function(){return c.execute(e)}},resolveFilterName:function(a){var b=a;return this.isParametrizedFilter(a)&&(b=a.substr(0,a.indexOf("["))),Q(b)},resolveFilterArgs:function(a){var b=null;if(this.isParametrizedFilter(a)){var c=a.indexOf("["),d=a.indexOf("]"),e=a.substr(c+1,d-c-1),f=e.split(",");b=[],angular.forEach(f,function(a){b.push(Q(a))})}return b},resolveStringFilters:function(a){var b=null;for(var e in d)if(c.match(e,a)){b=d[e];break}return b},isParametrizedFilter:function(a){return a.indexOf("perms")>-1||a.indexOf("roles")>-1}}}],u=function(a,b,c){c&&c.login&&c.login.path&&a(function(){b.path(c.login.path)})},v=["subject","$log",function(a,b){return{execute:function(){return b.debug("anon::execute"),!0}}}],w=["$rootScope","subject","angularShiroConfig","$location","$timeout","$log",function(a,b,c,d,e,f){return{execute:function(){return f.debug("authc::execute"),this.isAccessAllowed()||this.onAccessDenied()},isAccessAllowed:function(){return b.isAuthenticated()},onAccessDenied:function(){return u(e,d,c),!1}}}],x=["subject","angularShiroConfig","$location","$timeout","$log",function(a,b,c,d,e){return{execute:function(){return e.debug("logoutFilter::execute"),a.logout(),c.search("sessionId",null),b.logout&&b.logout.path&&c.path(b.logout.path),!0}}}],y=["subject","angularShiroConfig","$location","$timeout","$log",function(a,b,c,d,e){return{execute:function(a){return e.debug("perms::execute"),this.isAccessAllowed(a)||this.onAccessDenied()},isAccessAllowed:function(b){return a.isPermittedAll(b)},onAccessDenied:function(){return u(d,c,b),!1}}}],z=["subject","angularShiroConfig","$location","$timeout","$log",function(a,b,c,d,e){return{execute:function(a){return e.debug("roles::execute"),this.isAccessAllowed(a)||this.onAccessDenied()},isAccessAllowed:function(b){return a.hasAllRoles(b)},onAccessDenied:function(){return u(d,c,b),!1}}}];angular.module("angularShiro.templates",["templates/usernamePasswordForm.html"]),angular.module("templates/usernamePasswordForm.html",[]).run(["$templateCache",function(a){a.put("templates/usernamePasswordForm.html",'<div>\n\t<div style="padding-top: 10px; padding-bottom: 10px;"\n\t\tdata-ng-show="error">\n\t\t<span class="label label-danger label-important"\n\t\t\tdata-ng-bind="labels[\'connection.denied.message\']"> </span>\n\t</div>\n\t<form name="loginForm" data-role="form" data-ng-submit="submit()"\n\t\tnovalidate>\n\t\t<div class="form-group">\n\t\t\t<input name="username" type="text" class="form-control"\n\t\t\t\tplaceholder="{{labels[\'field.username.placeholder\']}}"\n\t\t\t\tdata-ng-model="token.username" required />\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<input name="password" type="password" class="form-control"\n\t\t\t\tplaceholder="{{labels[\'field.password.placeholder\']}}"\n\t\t\t\tdata-ng-model="token.password" required />\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<button type="submit" class="btn btn-primary btn-block"\n\t\t\t\tdata-ng-disabled="loginForm.$pristine || loginForm.$invalid">\n\t\t\t\t<span data-ng-bind="labels[\'button.submit.label\']"></span>\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</div>')}]);var A=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){a.isAuthenticated()?i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null))})}}}],B=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){var f=c.$eval(e.hasAnyPermission)||e.hasAnyPermission;f=angular.isArray(f)?f:[f];var k=a.isPermitted(f);angular.isArray(k)&&k.indexOf(!0)>-1?i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null))})}}}],C=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){var f=c.$eval(e.hasAnyRole)||e.hasAnyRole;f=angular.isArray(f)?f:[f],a.hasRoles(f).indexOf(!0)>-1?i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null))})}}}],D=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(f){f=c.$eval(e.hasPermission)||e.hasPermission,a.isPermitted(f)?i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null))})}}}],E=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){var f=e.hasRole;a.hasRole(f)?i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null))})}}}],F=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){var f=c.$eval(e.lacksPermission)||e.lacksPermission;a.isPermitted(f)?(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null)):i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)}))})}}}],G=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){var f=e.lacksRole;a.hasRole(f)?(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null)):i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)}))})}}}],H=["subject","$animate",function(a,b){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(function(){return a.authenticated},function(){a.isAuthenticated()?(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=s(h.clone),b.leave(j,function(){j=null}),h=null)):i||(i=c.$new(),g(i,function(a){h={clone:a},b.enter(a,d.parent(),d)}))})}}}],I=["subject",function(a){return{restrict:"E",replace:!0,scope:{},template:'<span class="principal" ng-bind="getPrincipal()"></span>',link:function(b,c,d){b.getPrincipal=function(){var b=a.getPrincipal();return angular.isObject(b)&&(b=d.property&&angular.isDefined(b[d.property])?b[d.property]:angular.toJson(b)),b}}}}],J=["subject","usernamePasswordToken",function(a,b){var c={"field.username.placeholder":"Username","field.password.placeholder":"Password","button.submit.label":"Connection","connection.denied.message":"Username and password do not match"};return{restrict:"E",replace:!0,templateUrl:"templates/usernamePasswordForm.html",scope:{onSuccess:"&",onError:"&"},link:function(d,e,f){d.error=!1,d.token=b,angular.isDefined(f.labels)?d.labels=angular.extend(c,angular.fromJson(f.labels)):d.labels=c,d.$watch("token.getPrincipal()",function(a){d.error=!1}),d.$watch("token.getCredentials()",function(a){d.error=!1}),d.submit=function(){a.login(b).then(function(a){angular.isDefined(d.onSuccess)&&d.onSuccess({data:a}),b.username=b.password=null},function(a){d.error=!0,angular.isDefined(d.onError)&&d.onError({data:a})})}}}}],K=angular.module("angularShiro.services",["ngCookies"]);K.provider("authenticator",e),K.provider("angularShiroConfig",d),K.factory("subject",["authenticator","authorizer","authenticationResponseParser","$cookieStore",function(a,b,c,d){return new r(a,b,c,d)}]),K.factory("usernamePasswordToken",function(){return new f}),K.factory("authorizer",function(){return new k}),K.factory("authenticationResponseParser",function(){return new h});var L={anon:v,authc:w,logout:x,perms:y,roles:z};for(var M in L)K.factory(M,L[M]);K.factory("filtersResolver",t);var N={hasRole:E,notAuthenticated:H,authenticated:A,lacksRole:G,hasAnyRole:C,hasPermission:D,lacksPermission:F,hasAnyPermission:B,principal:I,usernamePasswordForm:J},O=angular.module("angularShiro.directives",[]);for(var P in N)O.directive(P,N[P]);angular.module("angularShiro",["angularShiro.services","angularShiro.directives","angularShiro.templates"]).run(["$rootScope","$location","subject","angularShiroConfig","filtersResolver","$log",function(a,b,c,d,e,f){var g=function(a,b){for(var c=a.resolve(b.path()),d=0,e=c.length;d<e&&c[d]();d++);};a.$on("$locationChangeStart",function(a,h,i){var j=b.search();if(!c.isAuthenticated()&&j.sessionId)try{var k=c.rememberMe(j.sessionId);!1!==k?k.then(function(){g(e,b)}):(b.search("sessionId",null),b.path(d.login.path))}catch(a){f.error(a.message),b.search("sessionId",null),b.path(d.login.path)}else{var l=c.restoreAuth(d);g(e,b),l||!c.isRemembered()||j.sessionId||b.search("sessionId",c.getSession(!1).getId())}})}]);var Q=function(){return String.prototype.trim?function(a){return angular.isString(a)?a.trim():a}:function(a){return angular.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}()}(window,document);